<ui:Page x:Class="MCBS.WpfApp.Pages.Settings.ApplicationSettingsPage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:lex="http://wpflocalizeextension.codeplex.com"
         lex:LocalizeDictionary.DesignCulture="zh-CN"
         lex:ResxLocalizationProvider.DefaultAssembly="MCBS.WpfApp"
         lex:ResxLocalizationProvider.DefaultDictionary="Lang"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="clr-namespace:MCBS.WpfApp.Pages.Settings"
         xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
         xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
         xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
         xmlns:viewmodels="clr-namespace:MCBS.WpfApp.ViewModels.Settings"
         mc:Ignorable="d" 
         d:DataContext="{d:DesignInstance Type=viewmodels:ApplicationSettingsViewModel}"
         d:DesignHeight="450" d:DesignWidth="800"
         Title="{lex:Loc Title_ApplicationSettingsPage}">

    <ScrollViewer Margin="10">
        <ikw:SimpleStackPanel Spacing="10">
            <Grid Height="140"
                  Background = "{DynamicResource SettingsCardBackground}">
                <ToggleButton Height="100"
                              HorizontalAlignment = "Center"
                              VerticalAlignment="Center"
                              FontSize="36"
                              Foreground = "{DynamicResource SettingsCardForeground}"
                              IsChecked="{Binding AppTheme, Converter={StaticResource ElementThemeToBooleanConverter}}">
                    <ToggleButton.Style>
                        <Style TargetType="ToggleButton"
                               BasedOn="{StaticResource ToggleButtonGorgeousThemeSwitchStyle}">
                            <Setter Property="Content" Value="{lex:Loc ToggleButton_SwitchToDark}"/>
                            <Style.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter Property="Content" Value="{lex:Loc ToggleButton_SwitchToLight}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
            </Grid>
            
            <ui:SettingsCard Header="{lex:Loc ApplicationSettingsPage_Language}">
                <ComboBox SelectedValue="{Binding Language}"
                          SelectedValuePath="Tag"
                          Width="240">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <i:InvokeCommandAction Command="{Binding Source={x:Static lex:LocalizeDictionary.Instance}, Path=SetCultureCommand}"
                                                   CommandParameter="{Binding Language}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <ComboBoxItem Content="{lex:Loc Language_zh_CN}" Tag="zh-CN"/>
                    <ComboBoxItem Content="{lex:Loc Language_en_US}" Tag="en-US"/>
                </ComboBox>
            </ui:SettingsCard>
        </ikw:SimpleStackPanel>
    </ScrollViewer>
</ui:Page>
